00002240 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 01/12/2023 10:22:44

00000000                             1  *-----------------------------------------------------------
00000000                             2  * Title      : PRACTICA FINAL 23-24
00000000                             3  * Written by :
00000000                             4  * Date       :
00000000                             5  * Description:
00000000                             6  *-----------------------------------------------------------
00001000                             7              ORG     $1000
00001000                             8              
00001000                             9              INCLUDE "CONST.X68"
00001000                            10  ; ==============================================================================
00001000                            11  ; GAME CONSTANTS
00001000                            12  ; ==============================================================================
00001000                            13  
00001000                            14  ; --- CERCLES RELATED CONSTANTS ------------------------------------------------
00001000                            15  ;RADINIC: 15 RADFINA:
00001000                            16          
00001000  =00000005                 17  RADINIC EQU 5                   ;CIRCLES INICIAL RADIUS
00001000  =00000064                 18  RADFINA EQU 100                  ;CIRCLES FINAL RADIUS
00001000  =00FF0000                 19  COLFINA EQU $00FF0000           ;CIRCLES FINAL COLOR
00001000  =00000005                 20  CIRCHIT EQU 5                   ;NUMBER OF CIRCLES TO INCREASE GROWTH SPEED
00001000                            21  
00001000                            22  
00001000                            23  ; --- SCORE RELATED CONSTANTS --------------------------------------------------
00001000                            24  
00001000  =00FFFFFF                 25  SCOFCOL     EQU     $00FFFFFF               ; TEXT BACKGROUND COLOR
00001000  =00000101                 26  SCOLINE1    EQU     $0101                   ; FIRST TEXT LINE COORDINATES
00001000  =00000102                 27  SCOLINE2    EQU     $0102                   ; SECOND TEXT LINE COORDINATES
00001000                            28  
00001000                            29  
00001000                            30  
00001000                            31  ; --- RANDOM VECTORS CONSTANTS --------------------------------------------------
00001000                            32  RANDX      
00001000= 0333 0300 004D 0...       33      DC.W      819, 768, 77, 811, 374 
0000100A= 0104 037D 0165 0...       34      DC.W      260, 893, 357, 830, 1008 
00001014= 01A0 0192 02D2 0...       35      DC.W      416, 402, 722, 1050, 272 
0000101E= 03E0 0198 02FA 0...       36      DC.W      992, 408, 762, 368, 467 
00001028= 0239 03BE 0125 0...       37      DC.W      569, 958, 293, 1170, 977 
00001032= 02B4 0395 048A 0...       38      DC.W      692, 917, 1162, 995, 967 
0000103C= 0467 01B3 0179 0...       39      DC.W      1127, 435, 377, 616, 746 
00001046= 022D 0319 0228 0...       40      DC.W      557, 793, 552, 1218, 470 
00001050= 0194 03A0 013C 0...       41      DC.W      404, 928, 316, 1131, 568 
0000105A= 02EE 00F3 0158 0...       42      DC.W      750, 243, 344, 1013, 1132
00001064= 02AB 011E 009C 0...       43      DC.W      683, 286, 156, 766, 427
0000106E= 00D0 00D2 01B8 0...       44      DC.W      208, 210, 440, 392, 762
00001078= 00F5 011A 044C 0...       45      DC.W      245, 282, 1100, 799, 118
00001082= 00C9 0425 016D 0...       46      DC.W      201, 1061, 365, 356, 795
0000108C= 02B9 029F 0379 0...       47      DC.W      697, 671, 889, 318, 1031
00001096= 029F 00BE 0345 0...       48      DC.W      671, 190, 837, 394, 966
000010A0= 03DA 03F0 0177 0...       49      DC.W      986, 1008, 375, 1009, 23
000010AA= 0127 03F5 0361 0...       50      DC.W      295, 1013, 865, 581, 1012
000010B4= 012C 01F0 0488 0...       51      DC.W      300, 496, 1160, 1210, 837
000010BE= 014B 012D 0275 0...       52      DC.W      331, 301, 629, 930, 784
000010C8= 03AA 045F 0067 0...       53      DC.W      938, 1119, 103, 357, 883
000010D2= 021C 0445 0342 0...       54      DC.W      540, 1093, 834, 552, 243
000010DC= 03F8 03CD 014B 0...       55      DC.W      1016, 973, 331, 362, 390
000010E6= 0140 0440 002D 0...       56      DC.W      320, 1088, 45, 391, 1033
000010F0= 03FE 02BA 0014 0...       57      DC.W      1022, 698, 20, 1102, 370
000010FA                            58  
000010FA                            59  RANDY      
000010FA= 0085 0165 00B4 0...       60      DC.W      133, 357, 180, 577, 150 
00001104= 0025 00AF 012D 0...       61      DC.W      37, 175, 301, 279, 150 
0000110E= 01A6 01B5 01FB 0...       62      DC.W      422, 437, 507, 493, 285
00001118= 020D 0122 0016 0...       63      DC.W      525, 290, 22, 521, 517
00001122= 021C 0229 00B6 0...       64      DC.W      540, 553, 182, 356, 346
0000112C= 0065 01E4 0171 0...       65      DC.W      101, 484, 369, 373, 460
00001136= 0143 019D 0128 0...       66      DC.W      323, 413, 296, 410, 51 
00001140= 00B0 01A8 0212 0...       67      DC.W      176, 424, 530, 78, 78 
0000114A= 0185 0197 01B1 0...       68      DC.W      389, 407, 433, 438, 216
00001154= 01C4 0035 01B7 0...       69      DC.W      452, 53, 439, 108, 474 
0000115E= 022C 01CF 0099 0...       70      DC.W      556, 463, 153, 292, 375
00001168= 0232 00AB 01C7 0...       71      DC.W      562, 171, 455, 501, 275
00001172= 0091 010B 0025 0...       72      DC.W      145, 267, 37, 306, 34
0000117C= 0240 005C 0072 0...       73      DC.W      576, 92, 114, 474, 63
00001186= 01E2 0206 0161 0...       74      DC.W      482, 518, 353, 319, 519
00001190= 0127 017D 0201 0...       75      DC.W      295, 381, 513, 179, 340
0000119A= 005E 01C8 022B 0...       76      DC.W      94, 456, 555, 535, 71
000011A4= 0048 0180 0170 0...       77      DC.W      72, 384, 368, 525, 202
000011AE= 0111 0091 0187 0...       78      DC.W      273, 145, 391, 537, 384
000011B8= 01E4 0085 006C 0...       79      DC.W      484, 133, 108, 354, 140
000011C2= 01CD 0200 0130 0...       80      DC.W      461, 512, 304, 391, 225
000011CC= 0111 01CB 011D 0...       81      DC.W      273, 459, 285, 29, 86
000011D6= 01FD 00C9 00DC 0...       82      DC.W      509, 201, 220, 246, 42
000011E0= 0200 010A 013A 0...       83      DC.W      512, 266, 314, 100, 146
000011EA= 0093 0161 01BE 0...       84      DC.W      147, 353, 446, 204, 26 
000011F4                            85  
000011F4                            86  
000011F4                            87  
000011F4                            88  -------------------- end include --------------------
000011F4                            89              INCLUDE "LIB/DMMCONST.X68"
000011F4                            90  ; =============================================================================
000011F4                            91  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
000011F4                            92  ; =============================================================================
000011F4                            93  
000011F4  =00000040                 94  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
000011F4  =00000032                 95  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
000011F4  =00000000                 96  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
000011F4  =00000000                 97  -------------------- end include --------------------
000011F4                            98              INCLUDE "SYSCONST.X68"
000011F4                            99  ; ==============================================================================
000011F4                           100  ; SYSTEM CONSTANTS
000011F4                           101  ; ==============================================================================
000011F4                           102  
000011F4                           103  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
000011F4                           104  
000011F4  =00000500                105  SCRWIDTH    EQU     1280             ; SCREEN WIDTH
000011F4  =00000280                106  SCRHEIGH    EQU     640             ; SCREEN HEIGHT
000011F4  =0000003C                107  FRAMRATE    EQU     60              ; 20 = 50FPS, 10 = 100FPS
000011F4                           108  
000011F4                           109  
000011F4                           110  
000011F4                           111  
000011F4                           112  
000011F4                           113  -------------------- end include --------------------
000011F4                           114              INCLUDE "VARS.X68"
000011F4                           115  ; ==============================================================================
000011F4                           116  ; GAME VARIABLES
000011F4                           117  ; ==============================================================================
000011F4                           118  
000011F4                           119  ; --- CERCLES RELATED VARIABLES-------------------------------------------------
000011F4                           120  
000011F4                           121  CIRCVEL DS.W    1           ;CERCLE GROW SPEED
000011F6                           122  CIRCPOX DS.W    1           ;CERCLE X COORDINATE
000011F8                           123  CIRCPOY DS.W    1           ;CERCLE Y COORDINATE
000011FA                           124  CIRCCOL DS.W    1           ;CERCLE COLOR
000011FC                           125  ;CIRCRAD DS.W    1           ;CERCLE RADIUS     (A0)
000011FC                           126  ;CIRCVEC DS.W    1           ;CIRCLE RANDOM VECTOR  2(A0)
000011FC                           127  
000011FC                           128  
000011FC                           129  
000011FC                           130  
000011FC                           131  ; --- SCOREBOARD RELATED VARIABLES ---------------------------------------------
000011FC                           132  
000011FC                           133  SCOLIFE DS.W    1           ;NUMBER OF LIFES
000011FE                           134  SCONUMB DS.W    1           ;NUMBER OF CAPTURED CERCLES
00001200                           135  
00001200                           136  
00001200                           137  
00001200                           138  
00001200                           139  
00001200                           140  
00001200                           141  -------------------- end include --------------------
00001200                           142              INCLUDE "SYSVARS.X68"
00001200                           143  ; ============================================================================
00001200                           144  ; SYSTEM VARIABLES
00001200                           145  ; ============================================================================
00001200                           146  
00001200                           147  ; --- MOUSE RELATED VARIABLES ------------------------------------------------
00001200                           148  
00001200                           149  MOUCODX     DS.W    1               ;MOUSE X COORDINATE
00001202                           150  MOUCODY     DS.W    1               ;MOUSE Y COORDINATE
00001204                           151  
00001204                           152  ; --- FRAME RATE RELATED VARIABLES -------------------------------------------
00001204                           153  
00001204                           154  SCRINTCT    DS.B    1
00001205                           155  FRAMCONT    DS.B    1           
00001206                           156              DS.W    0
00001206                           157  
00001206                           158  
00001206                           159  -------------------- end include --------------------
00001206                           160              INCLUDE "LIB/UTLVARS.X68"
00001206                           161  ; =============================================================================
00001206                           162  ; UTILITY VARIABLES
00001206                           163  ; =============================================================================
00001206                           164  
00001206                           165  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00001208                           166              DS.W    0
00001208                           167  -------------------- end include --------------------
00001208                           168              INCLUDE "CIRCLE.X68"
00001208                           169  
00001208                           170  
00001208                           171  
00001208                           172  ;==============================================================================
00001208                           173  ;CIRCLE MANAGMENT  (AGENT)
00001208                           174  ;CIRCRAD (W)    (A0)
00001208                           175  ;CIRCVEC (W)    2(A0)
00001208                           176  
00001208                           177  
00001208                           178  ;==============================================================================
00001208                           179  
00001208                           180  ;------------------------------------------------------------------------------
00001208                           181  CIRCINIT:
00001208                           182  ;CIRLCE INITIALIZATION
00001208                           183  ;INPUT: A0 (POINTER VARIABLES)
00001208                           184  ;OUTPUT:
00001208                           185  ;------------------------------------------------------------------------------
00001208                           186  
00001208                           187  
00001208  103C 0050                188          MOVE.B  #80,D0
0000120C  223C 000000FF            189          MOVE.L  #$000000FF,D1
00001212  4E4F                     190          TRAP    #15             ;SET PEN COLOR
00001214                           191      
00001214  103C 0051                192          MOVE.B  #81,D0
00001218  223C 000000FF            193          MOVE.L  #$000000FF,D1
0000121E  4E4F                     194          TRAP    #15             ;SET FILL COLOR
00001220                           195  
00001220  30BC 0005                196          MOVE.W   #RADINIC,(A0)
00001224  4268 0002                197          CLR.W  2(A0)
00001228  5468 0002                198          ADDQ.W   #2,2(A0)
0000122C  4E75                     199          RTS
0000122E                           200      
0000122E                           201  ;------------------------------------------------------------------------------        
0000122E                           202      
0000122E                           203  DRAWCIRC:
0000122E                           204  ;CIRCLE PLOT
0000122E                           205  ;INPUT: A0 (POINTER VARIABLES)
0000122E                           206  ;OUTPUT:
0000122E                           207  ;------------------------------------------------------------------------------
0000122E                           208  
0000122E                           209         
0000122E  48E7 FE60                210          MOVEM.L D0-D6/A1-A2,-(A7)
00001232  103C 0058                211          MOVE.B  #88,D0
00001236  4EB9 00001252            212          JSR     GETCORD
0000123C  4E4F                     213          TRAP    #15             ;DRAW CIRCLE
0000123E  4CDF 067F                214          MOVEM.L (A7)+,D0-D6/A1-A2
00001242  0C50 0064                215          CMPI.W  #RADFINA,(A0)
00001246  6700 0004                216          BEQ     SUBLIFE
0000124A                           217  BACK:            
0000124A                           218  
0000124A  4E75                     219          RTS
0000124C                           220  SUBLIFE:
0000124C  5378 11FC                221          SUBQ.W  #1,(SCOLIFE)
00001250  60F8                     222          BRA BACK
00001252                           223  
00001252                           224  GETCORD:
00001252                           225  
00001252  45F8 1000                226          LEA RANDX,A2
00001256  43F8 10FA                227          LEA RANDY,A1
0000125A                           228          
0000125A                           229          ;ADDQ.W   #2,(CIRCVEC)
0000125A  3C28 0002                230          MOVE.W  2(A0),D6
0000125E                           231  
0000125E                           232      ;LEFT X
0000125E  3232 6000                233          MOVE.W  (A2,D6.W),D1
00001262  9250                     234          SUB.W   (A0),D1
00001264                           235      
00001264                           236      ;UPPER Y
00001264  3431 6000                237          MOVE.W  (A1,D6.W),D2
00001268  9450                     238          SUB.W   (A0),D2
0000126A                           239      
0000126A                           240      ;RIGHT X
0000126A  3632 6000                241          MOVE.W  (A2,D6.W),D3
0000126E  D650                     242          ADD.W   (A0),D3
00001270                           243      
00001270                           244      ;LOWER Y
00001270  3831 6000                245          MOVE.W  (A1,D6.W),D4
00001274  D850                     246          ADD.W   (A0),D4
00001276  4E75                     247          RTS
00001278                           248      
00001278                           249  
00001278                           250  CIRCUPD:
00001278                           251  
00001278  3F00                     252          MOVE.W  D0,-(A7)
0000127A  5438 1205                253          ADDQ.B  #2,(FRAMCONT)
0000127E  0C38 0005 1205           254          CMP.B   #5,(FRAMCONT)
00001284  6E00 0FE8                255          BGT     WINT
00001288  3038 11F4                256          MOVE.W  (CIRCVEL),D0
0000128C  D150                     257          ADD.W   D0,(A0)
0000128E  4238 1205                258          CLR.B   (FRAMCONT)
00001292  301F                     259          MOVE.W  (A7)+,D0
00001294                           260          
00001294  4E75                     261          RTS
00001296                           262  
00001296                           263  
00001296                           264  
00001296                           265  
00001296                           266  
00001296                           267  
00001296                           268  
00001296                           269  
00001296                           270  
00001296                           271  
00001296                           272  
00001296                           273  
00001296                           274  
00001296                           275  
00001296                           276  
00001296                           277  
00001296                           278  
00001296                           279  
00001296                           280  
00001296                           281  
00001296                           282  -------------------- end include --------------------
00001296                           283              ;INCLUDE "SCORE.X68"
00001296                           284              INCLUDE "SYSTEM.X68"
00001296                           285  ;=====================================================================
00001296                           286  ;SYSTEM INITIALIZATION
00001296                           287  ;=====================================================================
00001296                           288  
00001296                           289  SYSINIT:
00001296  4EB9 000012C8            290              JSR SCRINIT
0000129C  21FC 00001314 0080       291              MOVE.L  #BUFFUPD,($80)      ;INSTALLS A ROUTINE IN TRAP #0
000012A4  21FC 0000132E 0064       292              MOVE.L  #SCRUPD, ($64)
000012AC  4238 1205                293              CLR.B   (FRAMCONT)
000012B0  31FC 0001 11F4           294              MOVE.W   #1,(CIRCVEL)
000012B6  40E7                     295              MOVE.W  SR,-(A7)
000012B8  0257 D8FF                296              ANDI.W  #$D8FF,(A7)               ; ENABLE INTS
000012BC  303C 003C                297              MOVE.W  #60,D0
000012C0  323C 0301                298              MOVE.W  #3<<8|1,D1
000012C4  4E4F                     299              TRAP    #15
000012C6  4E73                     300              RTE
000012C8                           301  
000012C8                           302  
000012C8                           303  ; -----------------------------------------------------------------------------
000012C8                           304  SCRINIT:
000012C8                           305  ; INITIALIZES THE SCREEN, SCREEN-RELATED INTERRUPT AND VARS.
000012C8                           306  ; INPUT    - NONE
000012C8                           307  ; OUTPUT   - NONE
000012C8                           308  ; MODIFIES - NONE
000012C8                           309  ; -----------------------------------------------------------------------------
000012C8  48A7 C000                310              MOVEM.W D0-D1,-(A7)
000012CC                           311              
000012CC                           312              ;MOVE.L  #SCRUPD,($84) ; INSTALL TRAP
000012CC                           313              
000012CC  223C 05000280            314              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1 ; SET RESOLUTION
000012D2  103C 0021                315              MOVE.B  #33,D0
000012D6  4E4F                     316              TRAP    #15
000012D8  7201                     317              MOVE.L  #1,D1                     ; SET WINDOWED MODE
000012DA  4E4F                     318              TRAP    #15
000012DC                           319              
000012DC  323C FF00                320              MOVE.W  #$FF00,D1                 ; CLEAR VISIBLE BUFFER
000012E0  103C 000B                321              MOVE.B  #11,D0
000012E4  4E4F                     322              TRAP    #15
000012E6                           323              
000012E6  123C 0011                324              MOVE.B  #17,D1                    ; ENABLE DOUBLE BUFFER
000012EA  103C 005C                325              MOVE.B  #92,D0
000012EE  4E4F                     326              TRAP    #15
000012F0                           327              
000012F0  323C FF00                328              MOVE.W  #$FF00,D1                 ; CLEAR HIDDEN BUFFER
000012F4  103C 000B                329              MOVE.B  #11,D0
000012F8  4E4F                     330              TRAP    #15
000012FA                           331              
000012FA  103C 0020                332              MOVE.B  #32,D0                    ;CREACIÓ DE TIMED INT
000012FE  123C 0006                333              MOVE.B  #6,D1
00001302  143C 0081                334              MOVE.B  #$81,D2                   ;8(HABILITAR INT) 1(QUINA INT)
00001306  7610                     335              MOVE.L  #1000/FRAMRATE,D3         ;FER AQUESTA INT CADA X ms
00001308                           336              ;MOVE.L  #10,D3                    ;FER AQUESTA INT CADA X ms
00001308  4E4F                     337              TRAP    #15
0000130A                           338      
0000130A  4238 1204                339              CLR.B   (SCRINTCT)                                             
0000130E                           340              
0000130E                           341   
0000130E  4C9F 0003                342              MOVEM.W (A7)+,D0-D1
00001312  4E75                     343              RTS
00001314                           344  
00001314                           345  ; -----------------------------------------------------------------------------
00001314                           346  BUFFUPD:
00001314                           347  ; SWITCHES THE BUFFERS AND CLEARS THE HIDDEN ONE 
00001314                           348  ; INPUT    - NONE
00001314                           349  ; OUTPUT   - NONE
00001314                           350  ; MODIFIES - NONE
00001314                           351  ; -----------------------------------------------------------------------------
00001314  48A7 C000                352              MOVEM.W D0-D1,-(A7)
00001318                           353              
00001318                           354              ; SWITCH BUFFERS
00001318  103C 005E                355              MOVE.B  #94,D0
0000131C  4E4F                     356              TRAP    #15
0000131E                           357             
0000131E                           358              ; CLEAR HIDDEN BUFFER
0000131E  103C 000B                359              MOVE.B  #11,D0
00001322  323C FF00                360              MOVE.W  #$FF00,D1
00001326  4E4F                     361              TRAP    #15  
00001328                           362              
00001328  4C9F 0003                363              MOVEM.W (A7)+,D0-D1
0000132C  4E73                     364              RTE
0000132E                           365  
0000132E                           366  ;-----------------------------------------------------------------------------            
0000132E                           367  SCRUPD
0000132E                           368  ; TIMED INTERRUPT
0000132E                           369  ;
0000132E                           370  ;
0000132E                           371  ;
0000132E                           372  ;-----------------------------------------------------------------------------
0000132E  5238 1204                373              ADDQ.B  #1,(SCRINTCT)
00001332  4E73                     374              RTE
00001334                           375              
00001334                           376              
00001334                           377  ;-----------------------------------------------------------------------------             
00001334                           378  READMOU
00001334                           379  ;READ MOUSE VARIABLES
00001334                           380  ;            
00001334                           381  ;
00001334                           382  ;
00001334                           383  ;----------------------------------------------------------------------------- 
00001334  48A7 C000                384              MOVEM.W  D0-D1,-(A7)
00001338  303C 003D                385              MOVE.W  #61,D0
0000133C  323C 0002                386              MOVE.W  #2,D1
00001340  4E4F                     387              TRAP    #15
00001342                           388              
00001342  4C9F 0003                389              MOVEM.W (A7)+,D0-D1
00001346  4E75                     390              RTS
00001348                           391              
00001348                           392              
00001348                           393  
00001348                           394  
00001348                           395  
00001348                           396  
00001348                           397  -------------------- end include --------------------
00001348                           398              INCLUDE "LIB/DMMCODE.X68"
00001348                           399  ; =============================================================================
00001348                           400  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001348                           401  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001348                           402  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001348                           403  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001348                           404  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001348                           405  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001348                           406  ; =============================================================================
00001348                           407  
00001348                           408  ; -----------------------------------------------------------------------------
00001348                           409  DMMINIT
00001348                           410  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001348                           411  ; INPUT    - NONE
00001348                           412  ; OUTPUT   - NONE
00001348                           413  ; MODIFIES - NONE
00001348                           414  ; -----------------------------------------------------------------------------
00001348  48E7 8080                415              MOVEM.L D0/A0,-(A7)
0000134C  41F9 000015C0            416              LEA     DMMDATA,A0
00001352  303C 0031                417              MOVE.W  #DMMBNUM-1,D0
00001356  30BC 0000                418  .LOOP       MOVE.W  #DMMSYSID,(A0)
0000135A  D1FC 00000040            419              ADD.L   #DMMBSIZE,A0
00001360  51C8 FFF4                420              DBRA.W  D0,.LOOP
00001364  4CDF 0101                421              MOVEM.L (A7)+,D0/A0
00001368  4E75                     422              RTS
0000136A                           423  
0000136A                           424  ; -----------------------------------------------------------------------------
0000136A                           425  DMMFIRST
0000136A                           426  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
0000136A                           427  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000136A                           428  ; INPUT    - NONE
0000136A                           429  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000136A                           430  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000136A                           431  ; -----------------------------------------------------------------------------
0000136A  41F9 000015C0            432              LEA     DMMDATA,A0
00001370  4A58                     433  DMMFRLOP    TST.W   (A0)+
00001372  6600 0016                434              BNE     DMMFRFND
00001376  D1FC 0000003E            435              ADD.L   #DMMBSIZE-2,A0
0000137C  B1FC 0000223F            436  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001382  6DEC                     437              BLT     DMMFRLOP
00001384  207C 00000000            438              MOVE.L  #0,A0
0000138A  4E75                     439  DMMFRFND    RTS
0000138C                           440  
0000138C                           441  ; -----------------------------------------------------------------------------
0000138C                           442  DMMNEXT
0000138C                           443  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
0000138C                           444  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000138C                           445  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
0000138C                           446  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000138C                           447  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000138C                           448  ; -----------------------------------------------------------------------------
0000138C  2F00                     449              MOVE.L  D0,-(A7)
0000138E  2008                     450              MOVE.L  A0,D0
00001390  C0BC FFFFFFC0            451              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001396  0680 00000040            452              ADD.L   #DMMBSIZE,D0
0000139C  2040                     453              MOVE.L  D0,A0
0000139E  201F                     454              MOVE.L  (A7)+,D0
000013A0  60DA                     455              BRA     DMMFRCOM
000013A2                           456  
000013A2                           457  ; -----------------------------------------------------------------------------
000013A2                           458  DMMFRSTO
000013A2                           459  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
000013A2                           460  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
000013A2                           461  ; INPUT    - D0.W : ID TO SEARCH
000013A2                           462  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
000013A2                           463  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000013A2                           464  ; -----------------------------------------------------------------------------
000013A2  41F9 000015C0            465              LEA     DMMDATA,A0
000013A8  B058                     466  DMMFLOOP    CMP.W   (A0)+,D0
000013AA  6700 0016                467              BEQ     DMMFFND
000013AE  D1FC 0000003E            468              ADD.L   #DMMBSIZE-2,A0
000013B4  B1FC 0000223F            469  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
000013BA  6DEC                     470              BLT     DMMFLOOP
000013BC  207C 00000000            471              MOVE.L  #0,A0
000013C2  4E75                     472  DMMFFND     RTS
000013C4                           473  
000013C4                           474  ; -----------------------------------------------------------------------------
000013C4                           475  DMMNEXTO
000013C4                           476  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
000013C4                           477  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
000013C4                           478  ; INPUT    - D0.W : ID TO SEARCH
000013C4                           479  ;            A0   : POINTER WITHIN THE CURRENT SLOT
000013C4                           480  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
000013C4                           481  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000013C4                           482  ; -----------------------------------------------------------------------------
000013C4  2F00                     483              MOVE.L  D0,-(A7)
000013C6  2008                     484              MOVE.L  A0,D0
000013C8  C0BC FFFFFFC0            485              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000013CE  0680 00000040            486              ADD.L   #DMMBSIZE,D0
000013D4  2040                     487              MOVE.L  D0,A0
000013D6  201F                     488              MOVE.L  (A7)+,D0
000013D8  60DA                     489              BRA     DMMFCOM
000013DA                           490  
000013DA                           491  ; -----------------------------------------------------------------------------
000013DA                           492  DMMALLOC
000013DA                           493  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
000013DA                           494  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
000013DA                           495  ; INPUT    - D0.W : ID TO ASSIGN
000013DA                           496  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
000013DA                           497  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000013DA                           498  ; -----------------------------------------------------------------------------
000013DA  3F00                     499              MOVE.W  D0,-(A7)
000013DC  4240                     500              CLR.W   D0
000013DE  4EB8 13A2                501              JSR     DMMFRSTO
000013E2  301F                     502              MOVE.W  (A7)+,D0
000013E4  B1FC 00000000            503              CMP.L   #0,A0
000013EA  6700 0006                504              BEQ     .END
000013EE  3140 FFFE                505              MOVE.W  D0,-2(A0)
000013F2  4E75                     506  .END        RTS
000013F4                           507  
000013F4                           508  ; -----------------------------------------------------------------------------
000013F4                           509  DMMFREE
000013F4                           510  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000013F4                           511  ; SYSTEM (0)
000013F4                           512  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000013F4                           513  ; OUTPUT   - NONE
000013F4                           514  ; MODIFIES - NONE
000013F4                           515  ; -----------------------------------------------------------------------------
000013F4  48E7 8080                516              MOVEM.L D0/A0,-(A7)
000013F8  2008                     517              MOVE.L  A0,D0
000013FA  C0BC FFFFFFC0            518              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001400  2040                     519              MOVE.L  D0,A0
00001402  4250                     520              CLR.W   (A0)
00001404  4CDF 0101                521              MOVEM.L (A7)+,D0/A0
00001408  4E75                     522              RTS
00001408  4E75                     523  -------------------- end include --------------------
0000140A                           524              INCLUDE "LIB/AGLCODE.X68"
0000140A                           525  ; =============================================================================
0000140A                           526  ; AGENT MANAGEMENT
0000140A                           527  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
0000140A                           528  ; +0 - LONG : UPDATE SUBROUTINE POINTER
0000140A                           529  ; +4 - LONG : PLOT SUBROUTINE POINTER
0000140A                           530  ; +8:END    : DATA (AGENT SPECIFIC)
0000140A                           531  ; =============================================================================
0000140A                           532  
0000140A                           533  ; -----------------------------------------------------------------------------
0000140A                           534  AGLADD
0000140A                           535  ; CREATES A NEW AGENT
0000140A                           536  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
0000140A                           537  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
0000140A                           538  ;            A3 - POINTER TO AGENT PLOT FUNCTION
0000140A                           539  ;            D0 - AGENT TYPE (USED AS OWNED BY DMM)
0000140A                           540  ;            D1 - AGENT INITIALIZATION PARAMETER 1
0000140A                           541  ;            D2 - AGENT INITIALIZATION PARAMETER 2
0000140A                           542  ;            D3 - AGENT INITIALIZATION PARAMETER 3
0000140A                           543  ; OUTPUT   - NONE
0000140A                           544  ; MODIFIES - NONE
0000140A                           545  ; -----------------------------------------------------------------------------
0000140A  2F08                     546              MOVE.L  A0,-(A7)
0000140C  4EB8 13DA                547              JSR     DMMALLOC
00001410  B1FC 00000000            548              CMP.L   #0,A0
00001416  6700 0008                549              BEQ     .END
0000141A  20CA                     550              MOVE.L  A2,(A0)+
0000141C  20CB                     551              MOVE.L  A3,(A0)+
0000141E  4E91                     552              JSR     (A1)
00001420  205F                     553  .END        MOVE.L  (A7)+,A0
00001422  4E75                     554              RTS
00001424                           555  
00001424                           556  ; -----------------------------------------------------------------------------
00001424                           557  AGLUPD
00001424                           558  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001424                           559  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001424                           560  ; INPUT    - NONE
00001424                           561  ; OUTPUT   - NONE
00001424                           562  ; MODIFIES - NONE
00001424                           563  ; -----------------------------------------------------------------------------
00001424  48E7 00C0                564              MOVEM.L A0-A1,-(A7)
00001428  4EB8 136A                565              JSR     DMMFIRST
0000142C  B1FC 00000000            566  .LOOP       CMP.L   #0,A0
00001432  6700 000E                567              BEQ     .END
00001436  2250                     568              MOVE.L  (A0),A1
00001438  5088                     569              ADD.L   #8,A0
0000143A  4E91                     570              JSR     (A1)
0000143C  4EB8 138C                571              JSR     DMMNEXT
00001440  60EA                     572              BRA     .LOOP
00001442  4CDF 0300                573  .END        MOVEM.L (A7)+,A0-A1
00001446  4E75                     574              RTS
00001448                           575  
00001448                           576  ; -----------------------------------------------------------------------------
00001448                           577  AGLPLOT
00001448                           578  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001448                           579  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001448                           580  ; INPUT    - NONE
00001448                           581  ; OUTPUT   - NONE
00001448                           582  ; MODIFIES - NONE
00001448                           583  ; -----------------------------------------------------------------------------
00001448  48E7 00C0                584              MOVEM.L A0-A1,-(A7)
0000144C  4EB8 136A                585              JSR     DMMFIRST
00001450  B1FC 00000000            586  .LOOP       CMP.L   #0,A0
00001456  6700 0010                587              BEQ     .END
0000145A  2268 0004                588              MOVE.L  4(A0),A1
0000145E  5088                     589              ADD.L   #8,A0
00001460  4E91                     590              JSR     (A1)
00001462  4EB8 138C                591              JSR     DMMNEXT
00001466  60E8                     592              BRA     .LOOP
00001468  4CDF 0300                593  .END        MOVEM.L (A7)+,A0-A1
0000146C  4E75                     594              RTS
0000146E                           595  
0000146E                           596  ; -----------------------------------------------------------------------------
0000146E  =000013F4                597  AGLKILL     EQU     DMMFREE
0000146E                           598  ; KILLS THE AGENT BY RELEASING ITS MEMORY
0000146E                           599  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
0000146E                           600  ; OUTPUT   - NONE
0000146E                           601  ; MODIFIES - NONE
0000146E                           602  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
0000146E                           603  ; -----------------------------------------------------------------------------
0000146E                           604  -------------------- end include --------------------
0000146E                           605              
0000146E                           606              INCLUDE "LIB/UTLCODE.X68"
0000146E                           607  ; =============================================================================
0000146E                           608  ; UTILITY CODE
0000146E                           609  ; =============================================================================
0000146E                           610  
0000146E                           611  ; -----------------------------------------------------------------------------
0000146E                           612  UTLINIT
0000146E                           613  ; INITIALIZES UTILITY CODE
0000146E                           614  ; INPUT    - NONE
0000146E                           615  ; OUTPUT   - NONE
0000146E                           616  ; MODIFIES - NONE
0000146E                           617  ; -----------------------------------------------------------------------------
0000146E  48E7 C000                618              MOVEM.L D0-D1,-(A7)
00001472  103C 0008                619              MOVE.B  #8,D0
00001476  4E4F                     620              TRAP    #15
00001478  11C1 1206                621              MOVE.B  D1,(UTLRNDIX)
0000147C  4CDF 0003                622              MOVEM.L (A7)+,D0-D1
00001480  4E75                     623              RTS
00001482                           624  
00001482                           625  ; -----------------------------------------------------------------------------
00001482                           626  UTLRAND
00001482                           627  ; PROVIDES A PSEUDO-RANDOM BYTE
00001482                           628  ; INPUT    - NONE
00001482                           629  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
00001482                           630  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001482                           631  ; -----------------------------------------------------------------------------
00001482  2F08                     632              MOVE.L  A0,-(A7)
00001484  41F9 0000149C            633              LEA     .RANDVEC,A0
0000148A  4280                     634              CLR.L   D0
0000148C  1038 1206                635              MOVE.B  (UTLRNDIX),D0
00001490  1030 0800                636              MOVE.B  (A0,D0.L),D0
00001494  5238 1206                637              ADDQ.B  #1,(UTLRNDIX)
00001498  205F                     638              MOVE.L  (A7)+,A0
0000149A  4E75                     639              RTS
0000149C                           640  
0000149C                           641  
0000149C= A2 EE 9A 0C F5 24 ...    642  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
000014A4= 2A A3 51 26 E0 AC ...    643              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
000014AC= 75 51 CA FD 33 EB ...    644              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
000014B4= 60 CC E7 B8 9A EB ...    645              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
000014BC= 1D 76 B5 95 B0 89 ...    646              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
000014C4= 39 15 48 C9 6E CA ...    647              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
000014CC= 43 E7 E2 7C 37 25 ...    648              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000014D4= E9 94 CE E9 E4 52 ...    649              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000014DC= 37 6D 9A 84 A2 28 ...    650              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000014E4= 19 E2 C6 77 80 D4 ...    651              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000014EC= 0A 5A 32 67 33 C2 ...    652              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
000014F4= 59 80 DC 0E 57 FC ...    653              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
000014FC= 8A AB BC F7 07 4D ...    654              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001504= EF D5 77 6E 1E BB ...    655              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
0000150C= D6 E0 2A 8F BD 28 ...    656              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001514= 13 4F 66 EC 0A 64 ...    657              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
0000151C= 56 52 9A 16 9B 90 ...    658              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001524= 06 8A A4 F7 01 DA ...    659              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
0000152C= F2 E7 77 28 B1 76 ...    660              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001534= A4 42 E3 81 B1 67 ...    661              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000153C= BF CE FA 16 BF 38 ...    662              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001544= D1 8B 50 0C 5F 49 ...    663              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000154C= DE 4C 14 A2 40 DC ...    664              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001554= B6 9B 0A 38 5D AB ...    665              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
0000155C= E2 1B DD 75 15 82 ...    666              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001564= 8A 26 51 30 9F 47 ...    667              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
0000156C= 1E 8A BB 71 C6 6E ...    668              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001574= 9F 47 E5 34 94 27 ...    669              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
0000157C= 7D 06 D6 BA 30 0F ...    670              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001584= EC 7F 7E 03 CF 2D ...    671              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
0000158C= 94 5B 23 F2 8B CD ...    672              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
00001594= 74 33 EC B9 0F D5 ...    673              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001594= 74 33 EC B9 0F D5 ...    674  -------------------- end include --------------------
0000159C                           675              INCLUDE "LIB/DMMVARS.X68"
0000159C                           676  ; =============================================================================
0000159C                           677  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
0000159C                           678  ; =============================================================================
0000159C                           679  
000015C0                           680              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
000015C0                           681  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00002240                           682              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00002240                           683  -------------------- end include --------------------
00002240                           684  START:      
00002240                           685  ;---- INITIALIZATION ---------------------------------------------------------
00002240  007C 0700                686              ORI     #$0700,SR     
00002244  4EB8 1296                687              JSR     SYSINIT
00002248  4EB8 1348                688              JSR     DMMINIT
0000224C  31FC 0003 11FC           689              MOVE.W  #3,(SCOLIFE)
00002252                           690              ;JSR     CIRCINIT
00002252                           691              
00002252  43F8 1208                692              LEA CIRCINIT,A1
00002256  45F8 1278                693              LEA CIRCUPD,A2
0000225A  47F8 122E                694              LEA DRAWCIRC,A3
0000225E  303C 0001                695              MOVE.W  #1,D0
00002262  4EB8 140A                696              JSR     AGLADD
00002266                           697  LOOP:      
00002266                           698  ;---- UPDATE -----------------------------------------------------------------
00002266                           699  
00002266                           700  ;READ INPUT DEVICES
00002266                           701  
00002266  4EB8 1334                702              JSR     READMOU
0000226A                           703  
0000226A                           704  
0000226A                           705      ******RELLENAR CON LECTURA DEL RATÓN O TECLADO
0000226A                           706      
0000226A                           707  ;UPDATE GAME ELEMENTS
0000226A                           708              ;JSR CIRCUPD
0000226A  4EB8 1424                709              JSR AGLUPD
0000226E                           710      ******AÑADIR EL PROCESAMIENTO DE LAS LECTURAS ANTES REALIZADAS
0000226E                           711  
0000226E                           712  ;---- SYNCRONIZATION ---------------------------------------------------------
0000226E                           713  
0000226E  4A38 1204                714  WINT        TST.B   (SCRINTCT)
00002272  67FA                     715              BEQ     WINT
00002274  4238 1204                716              CLR.B   (SCRINTCT)
00002278                           717  
00002278                           718  ;---- DRAWING ----------------------------------------------------------------
00002278                           719              
00002278                           720              ;JSR     DRAWCIRC
00002278  4EB8 1448                721              JSR      AGLPLOT
0000227C  4E40                     722              TRAP    #0
0000227E                           723              ;JSR     DRAWSCOR
0000227E                           724              ;TRAP    #0         ;UPDATE DOUBLE BUFFER
0000227E                           725              
0000227E                           726  ;COMO ESTÁ AHORA EL PROGRAMA ACABA AL LLEGAR LA PELOTA A SU RADIO MÁXIMO,
0000227E                           727  ;CAMBIAR ESTO POR QUE EL JUGADOR PIERDA UNA VIDA
0000227E                           728  
0000227E  0C78 0002 11FC           729              CMPI    #2,(SCOLIFE)
00002284  6700 0004                730              BEQ     FIN
00002288  60DC                     731              BRA     LOOP
0000228A                           732  FIN
0000228A                           733  
0000228A  FFFF FFFF                734              SIMHALT             
0000228E                           735              
0000228E                           736              
0000228E                           737  
0000228E                           738              END     START        

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              140A
AGLADD:END          1420
AGLKILL             13F4
AGLPLOT             1448
AGLPLOT:END         1468
AGLPLOT:LOOP        1450
AGLUPD              1424
AGLUPD:END          1442
AGLUPD:LOOP         142C
BACK                124A
BUFFUPD             1314
CIRCCOL             11FA
CIRCHIT             5
CIRCINIT            1208
CIRCPOX             11F6
CIRCPOY             11F8
CIRCUPD             1278
CIRCVEL             11F4
COLFINA             FF0000
DMMALLOC            13DA
DMMALLOC:END        13F2
DMMBNUM             32
DMMBSIZE            40
DMMDATA             15C0
DMMFCOM             13B4
DMMFFND             13C2
DMMFIRST            136A
DMMFLOOP            13A8
DMMFRCOM            137C
DMMFREE             13F4
DMMFRFND            138A
DMMFRLOP            1370
DMMFRSTO            13A2
DMMINIT             1348
DMMINIT:LOOP        1356
DMMNEXT             138C
DMMNEXTO            13C4
DMMSYSID            0
DRAWCIRC            122E
FIN                 228A
FRAMCONT            1205
FRAMRATE            3C
GETCORD             1252
LOOP                2266
MOUCODX             1200
MOUCODY             1202
RADFINA             64
RADINIC             5
RANDX               1000
RANDY               10FA
READMOU             1334
SCOFCOL             FFFFFF
SCOLIFE             11FC
SCOLINE1            101
SCOLINE2            102
SCONUMB             11FE
SCRHEIGH            280
SCRINIT             12C8
SCRINTCT            1204
SCRUPD              132E
SCRWIDTH            500
START               2240
SUBLIFE             124C
SYSINIT             1296
UTLINIT             146E
UTLRAND             1482
UTLRAND:RANDVEC     149C
UTLRNDIX            1206
WINT                226E
